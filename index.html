<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ranked Tag 1v1</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <link rel="stylesheet" href="css/styles.css">
</head>
<body class="bg-slate-950 text-slate-100">

  <div class="max-w-6xl mx-auto p-4">
    <div id="authbar" class="mb-3"></div>
  </div>

  <div class="max-w-6xl mx-auto p-4">

    <header class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between mb-6">
      <div>
        <h1 class="text-3xl font-extrabold tracking-tight">
          ðŸ¦€ Ranked Tag 1v1
        </h1>
        <p class="mt-1 text-sm text-slate-400">
          Ranked ladder for Crab Game. Elo / RP / tiers, replays and more.
        </p>
        <p class="mt-1 text-xs text-slate-500" id="heroStats">
          Live snapshot, updated every few minutes.
        </p>
      </div>

      <nav class="flex flex-wrap gap-2 text-sm">
        <a href="#leaderboard" class="px-3 py-2 rounded bg-slate-900 border border-slate-700 hover:border-indigo-500">
          Leaderboard
        </a>
        <a href="#recentMatches" class="px-3 py-2 rounded bg-slate-900 border border-slate-700 hover:border-indigo-500">
          Recent matches
        </a>
        <a href="player.html" class="px-3 py-2 rounded bg-slate-900 border border-slate-700 hover:border-indigo-500">
          My profile
        </a>
        <a href="https://discord.gg/" target="_blank" rel="noreferrer"
           class="px-3 py-2 rounded bg-indigo-600 hover:bg-indigo-500 font-medium">
          Join Discord
        </a>
      </nav>
    </header>

    <section class="mb-8 grid gap-6 md:grid-cols-[minmax(0,1.7fr)_minmax(0,1.3fr)] items-start">
      <div>
        <h2 class="text-xl font-semibold mb-3">Search a player</h2>
        <p class="text-sm text-slate-400 mb-3">
          Search by in-game name or full SteamID64, and open a detailed profile page.
        </p>
        <div class="flex flex-col sm:flex-row gap-2">
          <input
            id="search"
            class="flex-1 px-3 py-2 rounded bg-slate-900 border border-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500"
            placeholder="Search username or SteamID">
          <button
            id="go"
            class="px-4 py-2 rounded bg-indigo-600 hover:bg-indigo-500 text-sm font-medium">
            Search
          </button>
        </div>
        <p class="mt-2 text-xs text-slate-500">
          Tip: partial username works too (profile page handles the exact lookup).
        </p>
      </div>

      <aside class="border border-slate-800 rounded-xl bg-slate-900/40 p-4 text-sm text-slate-300">
        <h2 class="font-semibold mb-2">What is this?</h2>
        <p class="mb-2">
          Ranked Tag 1v1 is a custom ranked system for Crab Game. Every match generates a replay,
          Elo / RP changes and a full match history stored on Supabase.
        </p>
        <p class="mb-2">
          To reduce Supabase traffic, the global leaderboard is served from a
          small JSON snapshot generated every few minutes.
        </p>
        <p class="text-xs text-slate-500">
          You can still see live recent matches and detailed player pages powered by Supabase.
        </p>
      </aside>
    </section>

    <main class="grid gap-8 lg:grid-cols-[minmax(0,1.9fr)_minmax(0,1.3fr)] items-start">
      <section id="leaderboard">
        <div class="mb-3 flex flex-col md:flex-row md:items-center md:justify-between gap-3">
          <div class="flex flex-wrap items-center gap-3">
            <span id="status"
                  class="px-2 py-1 rounded bg-slate-900 border border-slate-700 text-xs md:text-sm">
              Loadingâ€¦
            </span>
            <div class="flex items-center gap-2 text-xs md:text-sm text-slate-400">
              <label for="pageSize">Page size</label>
              <select id="pageSize"
                      class="bg-slate-900 border border-slate-800 rounded px-2 py-1 text-xs md:text-sm">
                <option>100</option>
                <option>250</option>
                <option>500</option>
                <option selected>1000</option>
              </select>
            </div>
            <button
              id="refresh"
              class="hidden px-3 py-1.5 rounded bg-emerald-600 hover:bg-emerald-500 text-xs md:text-sm">
              Refresh data
            </button>
          </div>
          <div id="pager" class="flex flex-wrap items-center gap-2 text-xs md:text-sm"></div>
        </div>

        <div id="board" class="overflow-x-auto border border-slate-800 rounded bg-slate-950/60"></div>
      </section>

      <section id="recentMatches">
        <h2 class="text-lg font-semibold mb-2">Recent matches</h2>
        <p class="mb-2 text-xs text-slate-500">
          Fetched live from Supabase (only last 20 matches â†’ very light).
        </p>
        <div id="recent" class="grid gap-3"></div>
      </section>
    </main>

    <footer class="mt-10 text-xs text-slate-500 border-t border-slate-900 pt-4">
      <p>Ranked Tag 1v1 is an unofficial fan project. Data is stored on Supabase, and the heavy leaderboard
        is served via a static JSON snapshot to keep things fast and cheap.</p>
    </footer>

  </div>

  <script src="js/config.js"></script>
  <script src="js/app.js"></script>
  <script src="js/auth.js"></script>
</body>
</html>
